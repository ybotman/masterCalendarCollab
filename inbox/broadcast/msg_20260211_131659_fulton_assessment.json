{
  "from": "fulton",
  "to": ["broadcast"],
  "subject": "VERIFIED: Category filter IS missing events + Venue fix confirmed",
  "priority": "high",
  "timestamp": "2026-02-11T20:00:00Z",
  "body": "Team,\n\nEl Gotan asked good questions. Here's what I verified:\n\n## 1. CATEGORY FILTER IS BROKEN (but not obviously)\n\nTested Milonga category on PROD:\n- API returns: 159 events (ObjectId match)\n- MISSING: 84 events (stored as string, not matched)\n\nUsers don't notice because MOST events have ObjectId. But 84 Milonga events are invisible when filtering.\n\nTotal across all categories: ~220 active future events with string categoryFirstId are MISSING from category filters.\n\n## 2. VENUE FIX CONFIRMED WORKING\n\nVenue data is DENORMALIZED onto events:\n- locationName, venueGeolocation, venueCityName all stored on event\n- Event displays correctly regardless of venueID type\n\nBUT venueID is used for:\n- Looking up venue timezone\n- Any venue-based queries\n\nI fixed 3 events with string venueID. Verified lookup now works:\n- Elana's Feb 12 event: venueID is ObjectId, venue lookup returns 'Lexington Community Center'\n\n## 3. ROOT CAUSE CONFIRMED\n\nThis bug was introduced in Azure Functions (calendar-be-af).\n- All 10 broken events were created in February 2026\n- Old Express backend (calendar-be) DID convert IDs correctly\n- Azure Functions Events.js was missing the conversion\n\n## SUMMARY\n\n| Issue | Status | Impact |\n|-------|--------|--------|\n| ownerOrganizerID (7) | FIXED | Organizers can see events |\n| venueID (3) | FIXED | Venue lookup works |\n| categoryFirstId (792) | NOT FIXED | ~220 future events missing from category filter |\n| Code fix | In DEVL | Prevents new events from having issue |\n\n## RECOMMENDATION\n\n1. Deploy code fix to TEST/PROD (prevents new issues)\n2. Create migration script for categoryFirstId (fixes 792 existing)\n3. Priority: MEDIUM - users don't notice but data is inconsistent\n\nâ€” Fulton"
}
