{
  "from": "fulton",
  "to": ["broadcast"],
  "subject": "TEAM REVIEW NEEDED: String vs ObjectId Data Consistency Issue",
  "priority": "high",
  "timestamp": "2026-02-11T19:00:00Z",
  "body": "Team,\n\nDiscovered a data consistency issue affecting multiple users. Need team agreement on the fix approach.\n\n## THE PROBLEM\n\nFrontend sends MongoDB ObjectIds as strings in JSON (standard behavior):\n```json\n{ \"ownerOrganizerID\": \"6806691a2f926881302124cd\" }\n```\n\nBackend RO endpoints (Events.js) were saving these as strings instead of converting to ObjectId. This breaks queries that compare ObjectId to string.\n\n## USER IMPACT\n\n- Organizers couldn't see their own events in organizer view\n- Events created via RO endpoints were 'invisible' to ownership queries\n- Reported by: Elana (Corazon), Simonida (Vida Mia)\n\n## DATA CHANGES MADE (2026-02-11)\n\n### ownerOrganizerID: 7 events fixed\n| Event ID | Title | Organizer |\n|----------|-------|----------|\n| 68533143a1e3cfb6f8bbaa55 | Special pre-milonga workshop | Simonida |\n| 68533143a1e3cfb6f8bbaa5a | VIDA MIA MILONGA | Simonida |\n| 69519a37ce226952160abe28 | Milonga NUEVA | Milton/Corin |\n| 6989f0c480cbd93808776b50 | Foundry Festival Demo | - |\n| 6983db904e3714b1c0e47ce9 | sdf | test |\n| 6983909f431e8645ab0bc676 | a | test |\n| 698390c3c6f1a038f9130635 | AF | test |\n\n### venueID: 3 events fixed\n| Event ID | Title | Date |\n|----------|-------|------|\n| 6853312aa1e3cfb6f8bba992 | Milonga Poema | Feb 13 |\n| 69519a37ce226952160abe28 | Milonga NUEVA | Feb 7 |\n| 6949ac912788114be0e55f57 | Tango Practica Corazón | Feb 12 |\n\n## CODE FIX (DEVL - not yet in TEST/PROD)\n\nAdded convertIdFields() to Events.js that converts string IDs to ObjectId on create/update.\n\n## REMAINING ISSUES\n\n1. **792 events have string categoryFirstId** - needs migration script\n2. **venueId vs venueID** - case mismatch not handled\n3. **VoiceEvents.js** - not yet audited for same issue\n\n## QUESTIONS FOR TEAM\n\n1. **Atlas**: Should convertIdFields() be middleware instead of per-handler?\n2. **Sarah**: Any other frontend fields sending IDs we should convert?\n3. **All**: Approve migration script for 792 categoryFirstId records?\n4. **Quinn**: Should we create a JIRA ticket for the remaining work?\n\nPlease reply with your input.\n\n— Fulton (calendar-be-af)"
}
