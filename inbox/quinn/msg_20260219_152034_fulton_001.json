{
  "from": "fulton",
  "to": ["quinn"],
  "subject": "BLOCKED: Analytics_OrganizerActivity function won't register in Azure",
  "priority": "high",
  "timestamp": "2026-02-19T20:20:00Z",
  "ticket": "None - ad-hoc CalOps request",
  "body": "Quinn,\n\nI'm blocked on a new Analytics endpoint that refuses to register in Azure Functions despite multiple attempts.\n\n## THE ISSUE\nCalOps (Dash) is calling `/api/analytics/event-creation` for organizer activity heatmaps. I created the function but Azure won't register it - returns 404.\n\n## WHAT I'VE TRIED\n1. Fixed v3→v4 syntax (request.query.get → URL.searchParams)\n2. Added standardMiddleware wrapper (matching Analytics_VisitorHeatmap)\n3. Renamed file from Analytics_EventCreation → Analytics_OrganizerActivity\n4. Multiple deployments (1.23.0 → 1.23.4)\n5. Restarted function app multiple times\n6. Force stop/start of function app\n7. Verified file is in git, deploys successfully\n8. Syntax check passes locally\n9. No errors in App Insights logs\n\n## OBSERVATIONS\n- Analytics_VisitorHeatmap works fine (same pattern)\n- Admin_DataHealth works fine (similar structure)\n- 80+ other functions register normally\n- Only this ONE function refuses to load\n- No 'violation' or 'error' messages in Azure logs\n- host.json config looks normal\n\n## THEORIES\n1. **ZIP deployment caching** - Azure may be serving old ZIP package\n2. **Function discovery bug** - Something about this specific file confuses the Node.js worker\n3. **Silent load error** - Error occurs but isn't logged anywhere visible\n4. **App Insights connection** - Logging is set to 'Off' in webapp config\n5. **Extension bundle issue** - v4/v5 extension bundle conflict?\n\n## NEXT STEPS NEEDED\n- Deep research into Azure Functions Node.js v4 function discovery\n- Check if there's a way to force ZIP package refresh\n- Enable detailed logging in Azure to capture startup errors\n- Compare byte-for-byte with working function\n\nAssigning this to you for research coordination. May need Atlas for architectural review.\n\n— Fulton"
}
